---
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import img1 from "../assets/2025/tune1.png";
import img2 from "../assets/2025/star1.png";
import img3 from "../assets/2025/HarmonyCon 2025 Logo.png";
import img4 from "../assets/2025/registration_ticket_v2.png";
import img5 from "../assets/2025/enter_ticket_v2.png";
---

<Layout title="HarmonyCon 2025">
  <div id="bg">

  </div>
  <div id="curtains">
    <div id="curtain-1"></div>
    <div id="curtain-2"></div>
  </div>
	<div id="splash" class="w-288 h-full relative">
    <div id="tune" class="absolute w-160 left-12 -top-8">
      <Image
        alt="Harmony"
        src={img1}
        width={1200}
      style="filter: drop-shadow(0 10px 10px #000);"
      />
    </div>
    <div id="star" class="absolute w-160 right-12 top-0">
      <Image
        alt="Harmony"
        src={img2}
        width={1200}
        style="filter: drop-shadow(0 10px 10px #000);"
      />
    </div>
	</div>
  <div id="logo" class="absolute w-192 mx-auto bottom-40 left-0 right-0 z-50">
    <Image
      alt="Harmony"
      src={img3}
      width={1200}
      style="filter: drop-shadow(0 10px 10px #000);"
      class="w-full"
    /> 
  </div>
  <div id="buttons" class="absolute bottom-8 left-0 right-0 mx-auto w-120 flex flex-row gap-x-16 justify-center">
    <a href="/register" style="filter: drop-shadow(0 2px 2px #000);" class="-rotate-1 hover:-rotate-3 duration-300 hover:scale-[1.1]">
      <Image
        alt="Harmony"
        src={img4}
        width={300}
        class="w-64 magic p-4 rounded"
      /> 
    </a>
    <a href="/main" style="filter: drop-shadow(0 2px 2px #000);" class="rotate-1 hover:rotate-3 duration-300 hover:scale-[1.1]">
      <Image
        alt="Harmony"
        src={img5}
        width={300}
        class="w-64 magic p-4 rounded"
      /> 
    </a>
  </div>
</Layout>

<script>
  document.addEventListener('swup:enable', () => {
    window.swup.hooks.on('page:view', () => {
      const curtain1 = document.getElementById("curtain-1");
      const curtain2 = document.getElementById("curtain-2");
      if (curtain1) {
        curtain1.className = "skip";
      }
      if (curtain2) {
        curtain2.className = "skip";
      }
    })
  });
</script>

<style lang="scss">

  :root {
    --elastic: 
    linear( 0, 0.0009 8.51%, -0.0047 19.22%, 0.0016 22.39%, 0.023 27.81%,
       0.0237 30.08%, 0.0144 31.81%, -0.0051 33.48%, -0.1116 39.25%, -0.1181 40.59%,
       -0.1058 41.79%, -0.0455, 0.0701 45.34%, 0.9702 55.19%, 1.0696 56.97%,
       1.0987 57.88%, 1.1146 58.82%, 1.1181 59.83%, 1.1092 60.95%, 1.0057 66.48%,
       0.986 68.14%, 0.9765 69.84%, 0.9769 72.16%, 0.9984 77.61%, 1.0047 80.79%,
       0.9991 91.48%, 1 );
  }

  #curtains {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  #curtain-1, #curtain-2 {
    content: "";
    display: block;
    width: 50%;
    height: 100%;
    background-color: #000;
  }

  #curtain-1 {
    position: absolute;
    left: 0;
    top: 0;
    transform: translateX(-100%);
    animation-name: slide-left;
    animation-duration: 1.2s;
    animation-delay: 0s;
    animation-direction: alternate;
    background-image: url('/curtain_full.png');
    background-size: cover;
  }

  #curtain-2 {
    position: absolute;
    right: 0;
    top: 0;
    transform: translateX(100%);
    animation-name: slide-right;
    animation-duration: 1.2s;
    animation-delay: 0s;
    animation-direction: alternate;
    background-image: url('/curtain_full.png');
    background-size: cover;
  }

  #splash {
    @apply absolute left-0 top-0 right-0 bottom-0 m-auto;
    opacity: 1;
  }

  #tune {
    top: -200%;
    animation: drop 2s var(--elastic) 0s forwards, swing 6s ease-in-out 0s infinite forwards;
  }

  #star {
    margin-top: 64px;
    top: -200%;
    animation: drop 2s var(--elastic) 0.2s forwards, swing2 7s ease-in-out 0.2s infinite forwards;
  }

  #logo {
    opacity: 0;
    animation:
            popup 1s ease 1.7s forwards,
            tease 4s ease 3s infinite forwards;
  }

  #buttons {
    opacity: 0;
    animation: jump 1.2s cubic-bezier(0.77, 0.01, 0.25, 1) 2.3s forwards;
  }

  
  @keyframes jump {
    0% {
      opacity: 0;
      transform: scale(0) rotate(0deg);
    }
    40% {
      opacity: 1;
      transform: scale(1.1) rotate(0deg);
    }
    100% {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }
  }

  @keyframes popup {
    0% {
      opacity: 0;
      transform: translateY(50px);
    }
    60% {
      opacity: 1;
      transform: translateY(-20px);
    }
    80% { transform: translateY(10px); }
    90% { transform: translateY(-5px); }
    100% {
      opacity: 1;
      transform: translateY(0px); 
    }
  }

  @keyframes tease {
    0%,
    70% { transform: translateY(0px); }
    85% { transform: rotate(5deg) scale(1); }
    90% { transform: rotate(-3deg) scale(1); }
    92.5% { transform: rotate(2deg) scale(1); }
    95% { transform: rotate(-2deg) scale(1); }
    100% { transform: rotate(0); }
  }

  @keyframes swing {
    0% { transform: rotate(0) }
    25% { transform: rotate(0.7deg) scale(1); }
    50% { transform: rotate(-0.7deg) scale(1); }
    75% { transform: rotate(0.7deg) scale(1); }
    100% { transform: rotate(0); }
  }

  @keyframes swing2 {
    0% { transform: rotate(0) }
    25% { transform: rotate(-1deg) scale(1); }
    50% { transform: rotate(1deg) scale(1); }
    75% { transform: rotate(-1deg) scale(1); }
    100% { transform: rotate(0); }
  }

  .skip {
    animation-duration: 0s !important;
    animation-delay: 0s !important;
  }

  @keyframes slide-left {
    0%, 40% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-100%);
    }
  }

	@keyframes slide-right {
    0%, 40% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(100%);
    }
  }
  @keyframes drop {
    from {
      top: -200%;
      /* transform: translateY(-200vh); */
    }
    to {
      top: -75%;
      /* transform: translateY(-75vh); */
    }
  }
  @keyframes fadein {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes fadeout {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  #bg {
    position: absolute;
    
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    background-image: url("../2959619.png");
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;
    opacity: 1;
  }
	</style>